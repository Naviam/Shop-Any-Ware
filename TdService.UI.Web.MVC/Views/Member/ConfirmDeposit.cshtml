@{
    ViewBag.Title = "DepositSuccess";
}

<h2>Confirm Deposit</h2>

<input type="button" id="btnConfirm" value="confirm" />

@section Scripts
{
    <script type="text/javascript">
        $(document).ready(function() {
            $("#btnConfirm").click(function() {
                $.post("/deposit/ConfirmExpressCheckOutPayment", { 'token': getParameterByName('token'), 'payerId': getParameterByName('PayerID') }, function (data) {
                    var items = ko.toJS(data);
                    alert(data);
                });
            });
        });

        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.search);
            if (results == null)
                return "";
            else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
        }
    </script>
}
