@{
    ViewBag.Title = "Shop Any Ware - Dashboard";
}
<div class="row-fluid">
    <div class="span6">
        <div id="addOrderForm" class="package">
            <ul class="nav nav-tabs">
                <li><a href="#">Мы покупаем и пересылаем</a></li>
                <li class="active"><a href="#">Вы покупаете и мы пересылаем</a></li>
            </ul>
            <table class="form-inline" style="width:100%;position:relative;z-index:99">
                <tr>
                    <td>
                        <input class="add-order" style="width:100%" data-bind="value: newOrderField, autosuggest: retailers" placeholder="please enter shop name or url (ex. amazon.com)"/>
                    </td>
                    <td>
                        <a href="#" class="btn btn-large btn-success" style="float: right" data-bind="click: createOrder">Add Order</a>
                    </td>
                </tr>
            </table>
        </div>
        <div data-bind="visible: shouldShowOrdersEmptyMessage">There are no active orders right now. Please create a new one.</div>
        <div id="orders" style="clear: left" data-bind="foreach: orders">
            <div class="package action">
                <div class="box">
                    <div>
                        <img title="Collapse" data-toggle="collapse" data-target="#order_extended" src="@Url.Content("~/content/img/story_collapsed1.png")" alt="Collapse">
                        <span class="">ID: <span data-bind="text: id"></span></span>
                        <span style="float:right" data-bind="text: createdDate"></span>
                        <span style="float:right" data-bind="text: receivedDate"></span>
                    </div>
                    <div class="white">
                        <i class="icon icon-pencil"></i> Order # <span data-bind="text: orderNumber" type="text" placeholder="size"></span> from <span data-bind="text: retailerUrl"></span>
                        <br />
                        <i class="icon icon-pencil"></i> Tracking # <span class="tn" title="A Title" data-content="And here's some amazing content. It's very engaging. right?" data-bind="text: trackingNumber" href="http://trkcnfrm1.smi.usps.com/PTSInternetWeb/InterLabelInquiry.do?origTrackNum=EE972210493US"></span>
                    </div>
                    <div id="order_extended" class="collapse in">
                        <div class="white">
                            The items will be automatically displayed when the order received.
                            <table>
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th class="left">Item</th>
                                        <th>Price</th>
                                        <th>Action</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody class="sortable" id="order_items" data-bind="sortable: {data: items}">
                                    <tr>
                                        <td class="draggable"><div></div></td>
                                        <td class="left"><i class="icon-camera"></i> <span class="tn" title="Kindle" data-content="<table class='details'><tr><td><img src='@Url.Content("~/content/img/kindle.jpg")' /></td><td><p>Name: Kindle</p><p>Weight: 1.3lbs</p><p>Color: Black</p><p>Quantity: 1</p><p>Cost: $100</p></td>" data-bind="click: $parent.removeItem, text: name"></span></td>
                                        <td><span data-bind="text: price"></span> <i class="icon-pencil"></i></td>
                                        <td>
                                            <div class="btn-group">
                                              <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown">Move <span class="caret"></span></button>
                                              <ul class="dropdown-menu">
                                                <li><i class="icon-gift"></i> Package name</li>
                                                <li><i class="icon-gift"></i> My Gifts</li>
                                                <li class="divider"></li>
                                                <li><i class="icon-plus"></i> Add to a new package</li>
                                              </ul>
                                            </div>
                                        </td>
                                        <td class="draggable"><div></div></td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td class="draggable"><div></div></td>
                                        <td class="right">Total</td>
                                        <td>$70</td>
                                        <td>
                                            <div class="btn-group">
                                              <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown">Move <span class="caret"></span></button>
                                              <ul class="dropdown-menu">
                                                <li><i class="icon-gift"></i> Package name</li>
                                                <li><i class="icon-gift"></i> My Gifts</li>
                                                <li class="divider"></li>
                                                <li><i class="icon-plus"></i> Add to a new package</li>
                                              </ul>
                                            </div>
                                        </td>
                                        <td class="draggable"><div></div></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                        <div class="btn-toolbar">
                            <span class="label label-info" data-bind="text: status"></span>
                            <button class="btn btn-small btn-primary" data-bind="visible: canItemsBeModified" data-toggle="modal" href="#myModal"><i class="icon-white icon-plus-sign"></i> ADD ITEM</button>
                            <button class="btn btn-small btn-danger" data-bind="click: $parent.removeOrder, visible: canBeRemoved"><i class="icon-white icon-trash"></i> REMOVE</button>
                            <button class="btn btn-small" data-toggle="modal" data-bind="visible: canBeRequestedForReturn"><i class="icon-retweet"></i> RETURN</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="span6">
        <div class="package">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#">Recent</a></li>
                <li><a href="#">History</a></li>
            </ul>
            <div><a href="#" class="btn btn-large btn-success" style="float: right" data-toggle="modal"><i class="icon-white icon-gift"></i> Add Package</a></div>
            <div style="clear: right"></div>
        </div>
        <div id="packages" data-bind="foreach: packages">
            <div class="package action">
                <div class="box">
                    <div>
                        <img title="Collapse" data-toggle="collapse" src="@Url.Content("~/content/img/story_collapsed1.png")" alt="Collapse">
                        <span data-bind="text: description"></span>
                        <span style="float:right"></span>
                    </div>
                    <div class="white">
                        <span data-bind="text: deliveryAddress"></span>
                        <br />
                        <span data-bind="text: dispatchMethod"></span>
                    </div>
                    <div class="white">
                        <table>
                            <thead>
                                <tr>
                                    <th class="left">Item</th>
                                    <th>Price</th>
                                </tr>
                            </thead>
                            <tbody id="package_items" data-bind="sortable: {data: items}">
                                <tr>
                                    <td class="left"><i class="icon-camera"></i> <span data-bind="text: name"></span></td>
                                    <td><span data-bind="text: price"></span></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td class="right">Total</td>
                                    <td>$70</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="btn-toolbar">
                        <span class="label label-info">Status: In Process</span>
                        <span>COST: $1234</span>
                        <span>Weight: 1.23 kg</span>
                        <a href="#" class="btn btn-small right" data-toggle="modal"><i class="icon-plane"></i>SEND PACKAGE</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="myModal" style="display: none">
  <div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…</p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
  </div>
</div>
@section Scripts
{
    <script type="text/javascript" src="@Url.Content("~/Scripts/ViewModels/DashboardViewModel.js")"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            //            $('.left').dotdotdot({
            //                watch: 'window'
            //            });
            //            $('.add-order').tooltip({title: 'wrong url'});
            ko.applyBindings(new DashboardViewModel());
            $(".tn").popover();
            // $("table, tr").disableSelection();
            //$("html").niceScroll();
//            var columnHeight = $(window).height() - $("#actionPanel").height() - $("#topmenu").height() - $(".modal-footer").height() - 90;
//            $("#orders").height(columnHeight - 100);
//            $("#packages").height(columnHeight - 55);
            // $([]).add("#orders").add("#packages").niceScroll({ cursorborder: "", cursorcolor: "#A67852", boxzoom: false });
        });
    </script>
}